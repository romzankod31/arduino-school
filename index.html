<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoboTech - –ò–∑—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è</title>
    <link rel="stylesheet" href="cssstyle.css">
</head>
<body>
    <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>üéØ RoboTech</h2>
            <button class="close-menu" onclick="Navigation.toggleSidebar()">√ó</button>
        </div>
        <div class="sidebar-content">
            <a href="index.html" class="menu-item">üè† –ì–ª–∞–≤–Ω–∞—è</a>
            <a href="learn.html" class="menu-item">üìö –ò–∑—É—á–µ–Ω–∏–µ —è–∑—ã–∫–∞</a>
            <a href="lessons.html" class="menu-item">üíª –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É—Ä–æ–∫–∏</a>
            <a href="profile.html" class="menu-item">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
            <a href="settings.html" class="menu-item">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
            <a href="#" class="menu-item" onclick="Auth.logout()">üö™ –í—ã–π—Ç–∏</a>
        </div>
        <div class="sidebar-footer">
            <div class="version-info">v2.0.0</div>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="main-content">
        <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é -->
        <button class="menu-toggle" onclick="Navigation.toggleSidebar()">‚ò∞</button>

        <header class="main-header">
            <div class="header-content">
                <h1>RoboTech</h1>
                <div id="userWelcome">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä Arduino!</div>
            </div>
            <div class="user-info">
                <div class="stat-badge">üíé <span id="totalPoints">0</span></div>
                <div class="level-badge">‚≠ê <span id="userLevel">–ù–æ–≤–∏—á–æ–∫</span></div>
            </div>
        </header>

        <main>
            <section class="welcome-section">
                <h2>–ù–∞—á–Ω–∏ –∏–∑—É—á–∞—Ç—å Arduino —Å –Ω—É–ª—è!</h2>
                <p>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏</p>
                <div class="welcome-actions">
                    <a href="learn.html" class="btn btn-primary">üìö –ò–∑—É—á–µ–Ω–∏–µ —è–∑—ã–∫–∞</a>
                    <a href="lessons.html" class="btn btn-secondary">üíª –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É—Ä–æ–∫–∏</a>
                </div>
            </section>

            <section class="achievements-section">
                <h2>üéØ –í–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
                <div class="achievements-grid" id="achievementsGrid">
                    <div class="loading-achievements">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π...</div>
                </div>
            </section>

            <section class="progress-section">
                <h3>üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p>–ü—Ä–æ–π–¥–µ–Ω–æ: <span id="completedLessons">0</span>/5 —É—Ä–æ–∫–æ–≤</p>
            </section>
        </main>
    </div>

    <script src="jsutils.js"></script>
    <script src="jsdata-manager.js"></script>
    <script src="jsauth.js"></script>
    <script src="jsnavigation.js"></script>
    <script src="jsui.js"></script>
    <script src="jsapp.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–º—É
            UserInterface.loadTheme();
            
            // –ó–∞—Ç–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            const app = ArduinoSchoolApp.getInstance();
            
            app.initialize().then(() => {
                console.log('App initialized successfully');
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å
                if (ArduinoSchoolApp.getCurrentUser()) {
                    ArduinoSchoolApp.loadProfileData();
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ—Å–ª–µ –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏
                    setTimeout(() => {
                        try {
                            UserInterface.loadAchievements();
                            console.log('Achievements loaded');
                        } catch (error) {
                            console.error('Error loading achievements:', error);
                            const achievementsGrid = document.getElementById('achievementsGrid');
                            if (achievementsGrid) {
                                achievementsGrid.innerHTML = '<div class="error-message">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</div>';
                            }
                        }
                    }, 200);
                } else {
                    // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                    const achievementsGrid = document.getElementById('achievementsGrid');
                    if (achievementsGrid) {
                        achievementsGrid.innerHTML = '<div class="info-message">–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</div>';
                    }
                }
            }).catch(error => {
                console.error('App initialization failed:', error);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
                const achievementsGrid = document.getElementById('achievementsGrid');
                if (achievementsGrid) {
                    achievementsGrid.innerHTML = '<div class="error-message">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</div>';
                }
            });
        });
    </script>
</body>
</html>