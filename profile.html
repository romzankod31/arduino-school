<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–∏–ª—å - RoboTech</title>
    <link rel="stylesheet" href="cssstyle.css">
</head>
<body>
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>üéØ RoboTech</h2>
            <button class="close-menu" onclick="Navigation.toggleSidebar()">√ó</button>
        </div>
        <div class="sidebar-content">
            <a href="index.html" class="menu-item">üè† –ì–ª–∞–≤–Ω–∞—è</a>
            <a href="learn.html" class="menu-item">üìö –ò–∑—É—á–µ–Ω–∏–µ —è–∑—ã–∫–∞</a>
            <a href="lessons.html" class="menu-item">üíª –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —É—Ä–æ–∫–∏</a>
            <a href="profile.html" class="menu-item active">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
            <a href="settings.html" class="menu-item">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
            <a href="#" class="menu-item" onclick="Auth.logout()">üö™ –í—ã–π—Ç–∏</a>
        </div>
    </nav>

    <div class="main-content">
        <button class="menu-toggle" onclick="Navigation.toggleSidebar()">‚ò∞</button>

        <header class="main-header">
            <h1>üë§ –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h1>
            <a href="index.html" class="btn btn-back">‚Üê –ù–∞–∑–∞–¥</a>
        </header>

        <div class="profile-content">
            <div class="profile-card">
                <div class="profile-header">
                    <div class="profile-avatar">üë®‚Äçüíª</div>
                    <div class="profile-info">
                        <h2 id="profileUsername">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                        <p id="joinDate">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: </p>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-icon">üíé</span>
                        <div class="stat-info">
                            <div class="stat-value" id="statPoints">0</div>
                            <div class="stat-label">–±–∞–ª–ª–æ–≤</div>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">üìö</span>
                        <div class="stat-info">
                            <div class="stat-value" id="statLessons">0/5</div>
                            <div class="stat-label">—É—Ä–æ–∫–æ–≤</div>
                        </div>
                    </div>
                    <div class="stat-item">
                        <span class="stat-icon">‚≠ê</span>
                        <div class="stat-info">
                            <div class="stat-value" id="statLevel">–ù–æ–≤–∏—á–æ–∫</div>
                            <div class="stat-label">—É—Ä–æ–≤–µ–Ω—å</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="progress-section">
                <h3>–ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è</h3>
                <div class="progress-bar-large">
                    <div class="progress-fill-large" id="profileProgressFill"></div>
                </div>
                <p>–ü—Ä–æ–π–¥–µ–Ω–æ <span id="profileCompletedLessons">0</span> –∏–∑ 5 —É—Ä–æ–∫–æ–≤</p>
            </div>

            <div class="data-management">
                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏</h3>
                <div class="data-buttons">
                    <button class="btn btn-secondary" onclick="ArduinoSchoolApp.exportData()">
                        üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
                    </button>
                    <button class="btn btn-warning" onclick="ArduinoSchoolApp.resetProgress()">
                        üîÑ –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
                    </button>
                </div>
            </div>

            <div class="achievements-section">
                <h3>üéØ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                <div class="achievements-grid" id="profileAchievements">
                    <div class="loading-achievements">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π...</div>
                </div>
            </div>
        </div>
    </div>

    <script src="jsutils.js"></script>
    <script src="jsdata-manager.js"></script>
    <script src="jsauth.js"></script>
    <script src="jsnavigation.js"></script>
    <script src="jsui.js"></script>
    <script src="jsapp.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            ArduinoSchoolApp.getInstance().initialize().then(() => {
                ArduinoSchoolApp.loadProfileData();
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
                setTimeout(() => {
                    UserInterface.loadProfileAchievements();
                }, 100);
            }).catch(error => {
                console.error('Profile initialization error:', error);
                const achievementsGrid = document.getElementById('profileAchievements');
                if (achievementsGrid) {
                    achievementsGrid.innerHTML = '<div class="error-message">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</div>';
                }
            });
        });
    </script>
</body>
</html>